webpackJsonp([1],{0:function(t,e,n){n("+prg"),t.exports=n("lVK7")},ROAq:function(t,e){},"Ue/Q":function(t,e){},lVK7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("ROAq"),s=(n.n(r),n("U7vG")),a=n.n(s),i=n("O27J"),o=(n.n(i),n("pnOm"));n.i(i.render)(a.a.createElement(o.a,null),document.querySelector("#app"))},pnOm:function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n("Ue/Q"),o=(n.n(i),n("U7vG")),l=n.n(o),u=n("O27J"),p=n.n(u),c=n("RIGI"),h=n.n(c),m=n("UVf0"),d=(n.n(m),n("7t+N")),f=n.n(d),y=n("LoU7"),g=n.n(y),E=n("uwn7"),v=(n.n(E),n("KRlh")),b=(n.n(v),n("dvSY")),I=(n.n(b),n("BV1C")),C=(n.n(I),n("LVGx")),R=(n.n(C),n("WYLF"));n.n(R);g.a.install();var N=function(){function t(e,n){a(this,t),this.totalSituations=e,this.countByRuns=n}return t.prototype.isEqual=function(t){if(void 0===t)return!1;if(this.totalSituations!==t.totalSituations)return!1;if(this.countByRuns.length!==t.countByRuns.length)return!1;for(var e=0;e<this.countByRuns.length;++e)if(this.countByRuns[e]!==t.countByRuns[e])return!1;return!0},t.prototype.getProbabilityForExactNumberOfRuns=function(t){return this.countByRuns[t]/this.totalSituations},t.prototype.getProbabilityForAtLeastNumberOfRuns=function(t){for(var e=0,n=0;n<t;++n)e+=this.countByRuns[n];return 1-e/this.totalSituations},t.prototype.getExpectedRuns=function(){for(var t=0,e=1;e<this.countByRuns.length;++e)t+=e*(this.countByRuns[e]/this.totalSituations);return t},t}(),O=function(t){function e(){return a(this,e),r(this,t.apply(this,arguments))}return s(e,t),e.prototype.render=function(){return l.a.createElement("th",null,this.props.inningNum)},e}(o.Component),x=function(t){function e(){return a(this,e),r(this,t.apply(this,arguments))}return s(e,t),e.prototype.handleClick=function(t){this.props.setInning(this.props.inning)},e.prototype.render=function(){return l.a.createElement("td",null,l.a.createElement("input",{type:"radio",name:"inningRadio",value:"{this.props.inning.homeOrVisitor + this.props.inning.num}",defaultChecked:this.props.inning.homeOrVisitor==this.props.chosenInning.homeOrVisitor&&this.props.inning.num==this.props.chosenInning.num,onClick:this.handleClick.bind(this)}))},e}(o.Component),k=l.a.createElement("th",null),S=l.a.createElement("th",{className:"sideHeader"},"V"),P=l.a.createElement("th",{className:"sideHeader"},"H"),Y=function(t){function e(){return a(this,e),r(this,t.apply(this,arguments))}return s(e,t),e.prototype.setInning=function(t){this.props.setInning(t)},e.prototype.render=function(){var t,e=[];for(t=1;t<=this.props.numInnings;++t)e.push(l.a.createElement(O,{key:t,inningNum:t}));var n=[];for(t=1;t<=this.props.numInnings;++t){var r={homeOrVisitor:"V",num:t};n.push(l.a.createElement(x,{key:r.homeOrVisitor+r.num,inning:r,chosenInning:this.props.inning,setInning:this.setInning.bind(this)}))}var s=[];for(t=1;t<=this.props.numInnings;++t){var r={homeOrVisitor:"H",num:t};s.push(l.a.createElement(x,{key:r.homeOrVisitor+r.num,inning:r,chosenInning:this.props.inning,setInning:this.setInning.bind(this)}))}return l.a.createElement("table",{className:"innings"},l.a.createElement("thead",null,l.a.createElement("tr",null,k,e)),l.a.createElement("tbody",null,l.a.createElement("tr",null,S,n),l.a.createElement("tr",null,P,s)))},e}(o.Component),w=l.a.createElement("span",null,"Outs:"),M=function(t){function e(){return a(this,e),r(this,t.apply(this,arguments))}return s(e,t),e.prototype.handleClick=function(t){this.props.setOuts(2==this.props.outs?0:this.props.outs+1)},e.prototype.getOutsColor=function(t){return t?"#ff0000":"#ffffff"},e.prototype.render=function(){var t=Math.min(60,30)/2;return l.a.createElement("p",{className:"littlespace",style:{display:"flex",alignItems:"center"}},w,l.a.createElement("svg",{width:75,height:40,onClick:this.handleClick.bind(this)},l.a.createElement("circle",{cx:75/4,cy:20,r:t,stroke:"#a0522d",fill:this.getOutsColor(this.props.outs>=1)}),l.a.createElement("circle",{cx:56.25,cy:20,r:t,stroke:"#a0522d",fill:this.getOutsColor(this.props.outs>=2)})))},e}(o.Component),V=l.a.createElement("option",{value:"1"},"none"),A=l.a.createElement("option",{value:"2"},"1st"),D=l.a.createElement("option",{value:"3"},"2nd"),T=l.a.createElement("option",{value:"4"},"1st & 2nd"),H=l.a.createElement("option",{value:"5"},"3rd"),F=l.a.createElement("option",{value:"6"},"1st & 3rd"),_=l.a.createElement("option",{value:"7"},"2nd & 3rd"),B=l.a.createElement("option",{value:"8"},"loaded"),L=function(t){function e(){return a(this,e),r(this,t.apply(this,arguments))}return s(e,t),e.prototype.handleChange=function(t){this.props.setRunners(t.target.value)},e.prototype.render=function(){return l.a.createElement("p",{className:"littlespace"},"Runners on base:Â ",l.a.createElement("select",{onChange:this.handleChange.bind(this),value:this.props.runners},V,A,D,T,H,F,_,B))},e}(o.Component),W=l.a.createElement("th",null,"Visitor"),U=l.a.createElement("th",null,"Home"),j=function(t){function e(){return a(this,e),r(this,t.apply(this,arguments))}return s(e,t),e.prototype.handleVisitorClick=function(){this.props.setScore(this.props.score-1)},e.prototype.handleHomeClick=function(){this.props.setScore(this.props.score+1)},e.prototype.render=function(){var t="",e="";return this.props.score<0?t="+"+-1*this.props.score:this.props.score>0?e="+"+this.props.score:(t="Tie",e="Tie"),l.a.createElement("table",{className:"scoreTable"},l.a.createElement("tbody",null,l.a.createElement("tr",null,W,l.a.createElement("td",null,t),l.a.createElement("td",null,l.a.createElement("button",{onClick:this.handleVisitorClick.bind(this)},"+"))),l.a.createElement("tr",null,U,l.a.createElement("td",null,e),l.a.createElement("td",null,l.a.createElement("button",{onClick:this.handleHomeClick.bind(this)},"+")))))},e}(o.Component),X=function(t){function e(){return a(this,e),r(this,t.apply(this,arguments))}return s(e,t),e.prototype.getBaseColor=function(t){return t?"#ff0000":"#eeeeee"},e.prototype.pointsFromCenter=function(t,e){return[[t[0],t[1]+e],[t[0]+e,t[1]],[t[0],t[1]-e],[t[0]-e,t[1]]]},e.prototype.toggleFirst=function(t){this.props.setRunners(1+(this.props.runners-1^1))},e.prototype.toggleSecond=function(t){this.props.setRunners(1+(this.props.runners-1^2))},e.prototype.toggleThird=function(t){this.props.setRunners(1+(this.props.runners-1^4))},e.prototype.render=function(){var t=this.props.runners-1&1,e=this.props.runners-1&2,n=this.props.runners-1&4,r=Math.max(20,10),s=[100,170],a=[[s[0],s[1]+r],[s[0]+r,s[1]],[s[0]+r],[s[1]-r],[s[0]-r,s[1]-r],[s[0]-r,s[1]]],i=[170,100],o=this.pointsFromCenter(i,r),u=[100,30],p=this.pointsFromCenter(u,r),c=[30,100],h=this.pointsFromCenter(c,r);return l.a.createElement("div",null,l.a.createElement("svg",{width:200,height:200},l.a.createElement("rect",{x:"0",y:"0",width:200,height:200,fill:"#006400"}),l.a.createElement("line",{x1:100,y1:170,x2:170,y2:100,strokeWidth:"5",stroke:"#a0522d"}),l.a.createElement("line",{x1:170,y1:100,x2:100,y2:30,strokeWidth:"5",stroke:"#a0522d"}),l.a.createElement("line",{x1:100,y1:30,x2:30,y2:100,strokeWidth:"5",stroke:"#a0522d"}),l.a.createElement("line",{x1:30,y1:100,x2:100,y2:170,strokeWidth:"5",stroke:"#a0522d"}),l.a.createElement("polygon",{points:a,strokeWidth:"0",fill:this.getBaseColor(!1)}),l.a.createElement("polygon",{points:o,strokeWidth:"0",fill:this.getBaseColor(t),onClick:this.toggleFirst.bind(this)}),l.a.createElement("polygon",{points:p,strokeWidth:"0",fill:this.getBaseColor(e),onClick:this.toggleSecond.bind(this)}),l.a.createElement("polygon",{points:h,strokeWidth:"0",fill:this.getBaseColor(n),onClick:this.toggleThird.bind(this)})))},e}(o.Component),q=function(t){function e(){return a(this,e),r(this,t.apply(this,arguments))}return s(e,t),e.prototype.onChange=function(t){void 0!=this.setYearsEvent&&window.clearTimeout(this.setYearsEvent),this.setState({years:[t[0],t[1]]}),this.setYearsEvent=window.setTimeout(function(){this.doActualChange(t)}.bind(this),this.TIMEOUT)},e.prototype.doActualChange=function(t){this.setYearsEvent=void 0,this.props.setYears([t[0],t[1]])},e.prototype.componentDidMount=function(){this.TIMEOUT=500,this.setYearsEvent=void 0},e.prototype.componentWillMount=function(){this.setState({years:this.props.years})},e.prototype.componentWillReceiveProps=function(t){this.setState({years:t.years})},e.prototype.render=function(){return l.a.createElement("div",null,l.a.createElement("p",{className:"littlespace"},"Years to include: ",this.state.years[0]," - ",this.state.years[1]),l.a.createElement(h.a,{className:"horizontal-slider",orientation:"horizontal",withBars:!0,defaultValue:[this.state.years[0],this.state.years[1]],min:MIN_YEAR,max:MAX_YEAR,onChange:this.onChange.bind(this)}))},e}(o.Component),G=l.a.createElement("div",null),J=l.a.createElement("th",null,"0 runs:"),K=l.a.createElement("th",null,"1 run:"),z=l.a.createElement("th",null,"1+ runs: "),Q=l.a.createElement("th",null,"2 runs:"),Z=l.a.createElement("th",null,"2+ runs: "),$=l.a.createElement("th",null,"3 runs:"),tt=l.a.createElement("th",null,"3+ runs: "),et=l.a.createElement("th",null,"4 runs:"),nt=l.a.createElement("th",null,"4+ runs: "),rt=function(t){function e(){return a(this,e),r(this,t.apply(this,arguments))}return s(e,t),e.prototype.componentDidUpdate=function(t,e){if(void 0===t||void 0===t.result?!(void 0===this.props||void 0===this.props.result):!this.props.result.isEqual(t.result)){var n=p.a.findDOMNode(this);f()(n).effect("highlight")}},e.prototype.makeDisplayPercent=function(t){return(Math.round(1e4*t)/100).toFixed(2)+"%"},e.prototype.makeDisplayRuns=function(t){return t.toFixed(2)},e.prototype.render=function(){return void 0===this.props.result?G:l.a.createElement("div",null,l.a.createElement("p",{className:"littlespace"},"Expected runs: ",this.makeDisplayRuns(this.props.result.getExpectedRuns())),l.a.createElement("table",{className:"runsPerInning"},l.a.createElement("tbody",null,l.a.createElement("tr",null,J,l.a.createElement("td",null,this.makeDisplayPercent(this.props.result.getProbabilityForExactNumberOfRuns(0)))),l.a.createElement("tr",null,K,l.a.createElement("td",null,this.makeDisplayPercent(this.props.result.getProbabilityForExactNumberOfRuns(1))),z,l.a.createElement("td",null,this.makeDisplayPercent(this.props.result.getProbabilityForAtLeastNumberOfRuns(1)))),l.a.createElement("tr",null,Q,l.a.createElement("td",null,this.makeDisplayPercent(this.props.result.getProbabilityForExactNumberOfRuns(2))),Z,l.a.createElement("td",null,this.makeDisplayPercent(this.props.result.getProbabilityForAtLeastNumberOfRuns(2)))),l.a.createElement("tr",null,$,l.a.createElement("td",null,this.makeDisplayPercent(this.props.result.getProbabilityForExactNumberOfRuns(3))),tt,l.a.createElement("td",null,this.makeDisplayPercent(this.props.result.getProbabilityForAtLeastNumberOfRuns(3)))),l.a.createElement("tr",null,et,l.a.createElement("td",null,this.makeDisplayPercent(this.props.result.getProbabilityForExactNumberOfRuns(4))),nt,l.a.createElement("td",null,this.makeDisplayPercent(this.props.result.getProbabilityForAtLeastNumberOfRuns(4)))))))},e}(o.Component),st=function(t){function e(){return a(this,e),r(this,t.apply(this,arguments))}return s(e,t),e.prototype.componentDidMount=function(){var t=p.a.findDOMNode(this);f()(".realOutput",t).effect("highlight")},e.prototype.componentDidUpdate=function(t,e){var n=!1,r=Object.keys(this.props);for(var s in r)if("years"!=r[s]&&this.props[r[s]]!=t[r[s]]){n=!0;break}if(n){var a=p.a.findDOMNode(this);f()(".realOutput",a).effect("highlight")}},e.prototype.render=function(){var t={width:"300px"};if(this.props.isPrimary||(t.marginTop="20px",t.cssFloat="left"),this.props.isInitial)return l.a.createElement("div",{style:t});var e=this.props.name;if(0===this.props.total)return e+="none",l.a.createElement("div",{style:t},l.a.createElement(m.CSSTransitionGroup,{transitionName:"outputTransition",transitionAppear:!1,transitionLeave:!1},l.a.createElement("div",{className:"realOutput",key:e},"No data found!")));var n=this.props,r=n.wins,s=100*r/n.total,a=Math.round(100*s)/100,i=n.isHome,o="",u="";a<50&&(a=Math.round(100*(100-a))/100,r=n.total-r,i=!i);var p=Math.round(a/(100-a)*-100),c="+"+-1*p;i?(o=p,u=c):(o=c,u=p);var h="Low",d="leverageLow";n.leverageIndex>=3?(h="Very High",d="leverageVeryHigh"):n.leverageIndex>=1.6?(h="High",d="leverageHigh"):n.leverageIndex>=.8&&(h="Medium",d="leverageMedium"),d="leverageIndex "+d;var f=i?"Home":"Visitor",y=n.isPrimary?{display:"none"}:{};return l.a.createElement("div",{style:t},l.a.createElement(m.CSSTransitionGroup,{transitionName:"outputTransition",transitionAppear:!1,transitionEnterTimeout:0,transitionLeaveTimeout:0},l.a.createElement("div",{className:"realOutput",key:e},l.a.createElement("p",{className:"littlespace",style:y},"Years: ",n.years[0]," - ",n.years[1]),l.a.createElement("p",{className:"littlespace"},"Total games: ",n.total),l.a.createElement("p",{className:"littlespace"},"Wins for ",f,": ",r),l.a.createElement("p",{className:"littlespace"},"Win percentage: ",l.a.createElement("b",null,f," ",a,"%")),l.a.createElement("p",{className:"littlespace"},"Leverage index: ",l.a.createElement("b",{className:d},n.leverageIndex," (",h,")")),l.a.createElement("p",{className:"littlespace"},"Home money line: ",l.a.createElement("b",null,o)),l.a.createElement("p",{className:"littlespace"},"Visitor money line: ",l.a.createElement("b",null,u)))))},e}(o.Component),at=function(t){function e(){return a(this,e),r(this,t.apply(this,arguments))}return s(e,t),e.prototype.render=function(){return l.a.createElement("progress",{style:{display:this.props.active?"":"none"}})},e}(o.Component),it=function(t){function e(n){a(this,e);var s=r(this,t.call(this,n)),i={inning:{homeOrVisitor:"V",num:1},outs:0,runners:1,score:0,years:[MIN_YEAR,MAX_YEAR],pendingRequests:!1,pendingCount:0};s.addInitialState(i,"output",[]);var o;for(o=0;o<extraYears.length;++o){var l=extraYears[o][0],u=extraYears[o][1],p=transformYears(l,u);s.addInitialState(i,"output"+o,p)}if(window.location.hash){var c=window.location.hash.substring(1),h=c.split(".");if(7===h.length||5===h.length){var m=(h[0],parseInt(h[1]),h[2],h[3],h[4],MIN_YEAR),d=MAX_YEAR;7===h.length&&(m=parseInt(h[5]),d=parseInt(h[6]),(isNaN(m)||isNaN(d))&&(m=MIN_YEAR,d=MAX_YEAR)),i.inning.homeOrVisitor=h[0],i.score=parseInt(h[1]),i.inning.num=parseInt(h[2]),i.outs=parseInt(h[3]),i.runners=parseInt(h[4]),i.years[0]=m,i.years[1]=d}}return s.state=i,s}return s(e,t),e.prototype.addInitialState=function(t,e,n){t["results"+e]={total:0,wins:0,leverageIndex:0,isHome:!1,isInitial:!0,years:n}},e.prototype.componentDidMount=function(){this.updateCalculations()},e.prototype.updateCalculations=function(){var t=this.state,e=t.inning.homeOrVisitor+"."+t.score+"."+t.inning.num+"."+t.outs+"."+t.runners;t.years[0]==MIN_YEAR&&t.years[1]==MAX_YEAR||(e+="."+t.years[0]+"."+t.years[1]),window.location.hash=e,this.setState({pendingHash:e,pendingCount:1+extraYears.length}),this.calculateStats(t.inning.homeOrVisitor,t.score,t.inning.num,t.outs,t.runners,t.years[0],t.years[1],"output",e);var n;for(n=0;n<extraYears.length;++n){var r=extraYears[n][0],s=extraYears[n][1],a=transformYears(r,s);r=a[0],s=a[1],this.calculateStats(t.inning.homeOrVisitor,t.score,t.inning.num,t.outs,t.runners,r,s,"output"+n,e)}},e.prototype.calculateStats=function(t,e,n,r,s,a,i,o,l){var u="H"===t;u||(e*=-1);var p='"'+t+'",'+n+","+r+","+s+","+e;f.a.ajax({url:"https://gregstoll.dyndns.org/~gregstoll/baseball/getcumulativestats.cgi",data:{stateString:p,startYear:a,endYear:i,rand:Math.random()},dataType:"json",complete:function(t,e){var n=this.state["results"+o];n.total=parseInt(t.responseJSON.total),n.wins=parseInt(t.responseJSON.wins),n.leverageIndex=parseFloat(t.responseJSON.leverage),n.isHome=u,n.isInitial=!1;var r={};r["results"+o]=n,this.setState(function(t,e){return l===t.pendingHash&&(r.pendingCount=t.pendingCount-1),r})}.bind(this)}),this.state.runsPerInningData?this.updateRunsPerInning():f.a.ajax({url:"https://gregstoll.dyndns.org/~gregstoll/baseball/runsperinning.xml",dataType:"xml",complete:function(t,e){this.setState({runsPerInningData:t.responseXML}),this.updateRunsPerInning()}.bind(this)})},e.prototype.updateRunsPerInning=function(){for(var t=this.state.outs,e=this.state.runners,n=this.state.runsPerInningData.evaluate("//situation[@outs="+t+"][@runners="+e+"][1]",this.state.runsPerInningData,null,XPathResult.ANY_UNORDERED_NODE_TYPE,null).singleNodeValue,r=n.childNodes,s=0,a=[],i=0;i<r.length;++i){var o=r[i];if("total"==o.localName)s=parseInt(o.innerHTML,10);else{for(var l=parseInt(o.getAttribute("runs"),10);a.length<=l;)a.push(0);a[l]=parseInt(o.innerHTML,10)}}this.setState({runsPerInning:new N(s,a)})},e.prototype.setInning=function(t){this.setState({inning:t},this.updateCalculations.bind(this))},e.prototype.setOuts=function(t){this.setState({outs:t},this.updateCalculations.bind(this))},e.prototype.setRunners=function(t){this.setState({runners:t},this.updateCalculations.bind(this))},e.prototype.setScore=function(t){this.setState({score:t},this.updateCalculations.bind(this))},e.prototype.setYears=function(t){this.setState({years:t},this.updateCalculations.bind(this))},e.prototype.createStatsResults=function(t,e,n){return l.a.createElement(st,{isPrimary:t,name:e,total:this.state["results"+e].total,wins:this.state["results"+e].wins,leverageIndex:this.state["results"+e].leverageIndex,isHome:this.state["results"+e].isHome,isInitial:this.state["results"+e].isInitial,years:t?[]:n,key:e})},e.prototype.render=function(){var t=[];t.push(this.createStatsResults(!0,"output",[]));var e,n=[];for(e=0;e<extraYears.length;++e){var r=extraYears[e][0],s=extraYears[e][1],a=transformYears(r,s);n.push(this.createStatsResults(!1,"output"+e,a))}return l.a.createElement("div",null,l.a.createElement(Y,{numInnings:11,inning:this.state.inning,setInning:this.setInning.bind(this)}),l.a.createElement("div",{style:{float:"left"}},l.a.createElement(M,{outs:this.state.outs,setOuts:this.setOuts.bind(this)}),l.a.createElement(L,{runners:this.state.runners,setRunners:this.setRunners.bind(this)}),l.a.createElement(j,{score:this.state.score,setScore:this.setScore.bind(this)}),l.a.createElement(q,{years:this.state.years,setYears:this.setYears.bind(this)})),l.a.createElement("div",{style:{float:"left",marginLeft:"25px"}},l.a.createElement(X,{runners:this.state.runners,setRunners:this.setRunners.bind(this)})),l.a.createElement("div",{style:{clear:"both",float:"left"}},l.a.createElement(at,{active:this.state.pendingCount>0}),t),l.a.createElement("div",{style:{float:"left"}},l.a.createElement(rt,{result:this.state.runsPerInning})),l.a.createElement("div",{style:{clear:"both"}},n),l.a.createElement("div",{style:{clear:"both"}}))},e}(o.Component);e.a=it}},[0]);
//# sourceMappingURL=app.694a40d5.js.map